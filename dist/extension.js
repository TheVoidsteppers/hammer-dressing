(()=>{"use strict";var e={112:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const o=i(496),n=i(364);function s(e,t){var i,n,s;return r(this,void 0,void 0,(function*(){const r=o.extensions.getExtension("vscode.git");yield null==r?void 0:r.activate();const a=null==r?void 0:r.exports,d=null===(i=a.model)||void 0===i?void 0:i.git,u=null==a?void 0:a.getAPI(1),l=null===(s=null===(n=null==u?void 0:u.repositories[0])||void 0===n?void 0:n.rootUri)||void 0===s?void 0:s.fsPath;if(Array.isArray(e)){const i=e.map((e=>{const i=o.workspace.getWorkspaceFolder(e);if(!i||!i.uri)return;const r=e.path.replace(i.uri.path,"."),n=`update-index ${t?"--skip-worktree":"--no-skip-worktree"} ${r}`;return d.exec(l,n.split(" "))}));yield Promise.all(i)}}))}t.activate=function(e){return r(this,void 0,void 0,(function*(){e.subscriptions.push(o.commands.registerCommand("extension.HammerDressing.git.skip-worktree",((...e)=>{s(e[1],!0).then((()=>{t.refresh()}))})),o.commands.registerCommand("extension.HammerDressing.git.no-skip-worktree",((...e)=>{s(e[1],!1).then((()=>{t.refresh()}))})));const t=new n.SkipWorktreeProvider;o.window.registerTreeDataProvider("SkipWorktreeFiles",t),e.subscriptions.push(o.commands.registerCommand("extension.HammerDressing.git.skip-worktree-refresh",(()=>t.refresh())),o.commands.registerCommand("extension.HammerDressing.git.no-skip-worktree-in-treeview",(e=>{(function(e){var t,i;return r(this,void 0,void 0,(function*(){const r=o.extensions.getExtension("vscode.git");yield null==r?void 0:r.activate();const n=null==r?void 0:r.exports,s=n.model.git,a=null==n?void 0:n.getAPI(1),d=null===(i=null===(t=null==a?void 0:a.repositories[0])||void 0===t?void 0:t.rootUri)||void 0===i?void 0:i.fsPath,u=`update-index --no-skip-worktree ${e.label}`;yield s.exec(d,u.split(" "))}))})(e).then((()=>{t.refresh()}))})))}))}},364:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SkipWorktreeProvider=void 0;const o=i(496),n=i(496);t.SkipWorktreeProvider=class{constructor(){this._onDidChangeTreeData=new o.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.data=[],this.parseTree().then((()=>{this._onDidChangeTreeData.fire()}))}get gitExtension(){const e=o.extensions.getExtension("vscode.git");return null==e?void 0:e.exports}get git(){var e;return null===(e=this.gitExtension.model)||void 0===e?void 0:e.git}get repositoryRoot(){var e,t,i,r;return null===(r=null===(i=null===(t=null===(e=this.gitExtension)||void 0===e?void 0:e.getAPI(1))||void 0===t?void 0:t.repositories[0])||void 0===i?void 0:i.rootUri)||void 0===r?void 0:r.fsPath}refresh(){return r(this,void 0,void 0,(function*(){yield this.parseTree(),this._onDidChangeTreeData.fire()}))}parseTree(){return r(this,void 0,void 0,(function*(){if(!this.repositoryRoot)return;this.data=[];const e=(yield this.git.exec(this.repositoryRoot,"ls-files -v".split(" "))).stdout.split("\n").filter((e=>e.startsWith("S ")||e.startsWith("s "))).map((e=>e.replace(/s /i,"")));this.data=e.map((e=>new n.TreeItem(e)))}))}getTreeItem(e){return e}getChildren(){return this.data}}},496:e=>{e.exports=require("vscode")}},t={},i=function i(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}(112);module.exports=i})();
//# sourceMappingURL=extension.js.map